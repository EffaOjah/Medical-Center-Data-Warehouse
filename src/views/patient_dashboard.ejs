<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/bootstrap-5.3.3-dist/css/bootstrap.min.css" rel="stylesheet" />
    <title>Data warehouse system | Patient Dashboard</title>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        nav {
            background-color: rgb(228, 86, 121);
            padding: 20px;
            text-align: center;
            color: white;
        }
    </style>
</head>
<body>
    <nav>
        <h1>Medical Centre Data Warehouse System for the University of Calabar</h1>
        <br>
        <h2 style="font-style: italic;">Patient Dashboard</h2>
    </nav>

    <br>

    <div class="d-flex justify-content-center">
        <section>
            <h2 class="text-body"><%= patient[0].full_name %></h2>

            <br>
            <br>

            <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Personnel Details</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#records" type="button" role="tab" aria-controls="profile" aria-selected="false">Medical Records</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#history" type="button" role="tab" aria-controls="contact" aria-selected="false">Treatment History</button>
                </li>
              </ul>

              <!-- Tab Contents -->
               <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <br>
                    <ul style="list-style-type: none; line-height: 40px;">
                        <li><span class="fw-bold">Full Name:</span> <%= patient[0].full_name %></li>
                        <li><span class="fw-bold">Email:</span> <%= patient[0].email %></li>
                        <li><span class="fw-bold">Phone Number:</span> <%= patient[0].phone_number %></li>
                        <li><span class="fw-bold">Date of Birth:</span> <%= patient[0].date_of_birth.toDateString() %></li>
                        <li><span class="fw-bold">Gender:</span> <%= patient[0].gender %></li>
                        <li><span class="fw-bold">Address:</span> <%= patient[0].address %></li>
                    </ul>
                </div>

                <div class="tab-pane fade show" id="records" role="tabpanel" aria-labelledby="records-tab" style="height:  400px !important; overflow-y: scroll;">
                    <br>
                    <% if (records.length < 1) { %>
                        <h3>No Medical Record</h3>
                    <% } else { %>
                        <% for( let i = 0; i < records.length; i++ ) { %>
                            <ul style="list-style-type: none; line-height: 40px;">
                                <li><span class="fw-bold">Doctor:</span> <%= records[i].doctor %></li>
                                <li><span class="fw-bold">Diagnosis:</span> <%= records[i].diagnosis %></li>
                                <li><span class="fw-bold">Treatment Plan:</span> <%= records[i].treatment_plan %></li>
                                <hr>
                            </ul>
                        <% } %>
                   <% } %>
                </div>

                <div class="tab-pane fade show" id="history" role="tabpanel" aria-labelledby="records-tab" style="height:  400px !important; overflow-y: scroll;">
                    <br>
                    <% if (treatmentHistory.length < 1) { %>
                        <h3>No Treatment History</h3>
                    <% } else { %>
                        <% for( let i = 0; i < treatmentHistory.length; i++ ) { %>
                            <ul style="list-style-type: none; line-height: 40px;">
                                <li><span class="fw-bold">Treatment Description:</span> <%= treatmentHistory[i].treatment_description %></li>
                                <li><span class="fw-bold">Treatment Date:</span> <%= treatmentHistory[i].treatment_date.toDateString() %></li>
                                <li><span class="fw-bold">Outcome:</span> <%= treatmentHistory[i].outcome %></li>
                                <hr>
                            </ul>
                        <% } %>
                   <% } %>
                </div>
               </div>
        </section>
    </div>

    

    <script src="/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>